apiVersion: espejote.io/v1alpha1
kind: JsonnetLibrary
metadata:
  labels:
    app.kubernetes.io/name: espejote-networkpolicy-sync
  name: espejote-networkpolicy-sync
  namespace: syn-espejote
spec:
  data:
    config.json: |-
      {
          "annotations": {
              "activePolicySets": "network-policies.syn.tools/active-policy-sets"
          },
          "hasCilium": true,
          "ignoredNamespaces": [
              "my-ignored-namespace"
          ],
          "labels": {
              "baseDefaults": "network-policies.syn.tools/base-defaults",
              "noDefaults": "network-policies.syn.tools/no-defaults",
              "policySets": "network-policies.syn.tools/policy-sets",
              "purgeDefaults": "network-policies.syn.tools/purge-defaults",
              "purgeNonBase": "network-policies.syn.tools/purge-non-base"
          },
          "policies": {
              "allow-from-other-namespaces": {
                  "ingress": [
                      {
                          "from": [
                              {
                                  "namespaceSelector": {
                                      "matchLabels": {
                                          "test.example.net/test-group": "main"
                                      }
                                  }
                              }
                          ]
                      }
                  ],
                  "podSelector": {

                  },
                  "policyTypes": [
                      "Ingress"
                  ]
              },
              "allow-from-same-namespace": {
                  "ingress": [
                      {
                          "from": [
                              {
                                  "podSelector": {

                                  }
                              }
                          ]
                      }
                  ],
                  "podSelector": {

                  },
                  "policyTypes": [
                      "Ingress"
                  ]
              },
              "cilium/allow-from-cluster-nodes": {
                  "endpointSelector": {

                  },
                  "ingress": [
                      {
                          "fromEntities": [
                              "host"
                          ]
                      },
                      {
                          "fromNodes": [
                              {
                                  "matchLabels": {
                                      "syn.tools/cluster-id": "c-green-test-1234"
                                  }
                              }
                          ]
                      }
                  ]
              }
          },
          "policySets": {
              "namespace-isolation-basic": [
                  "allow-from-other-namespaces",
                  "allow-from-same-namespace",
                  "cilium/allow-from-cluster-nodes"
              ],
              "namespace-isolation-full": [
                  "allow-from-other-namespaces",
                  "cilium/allow-from-cluster-nodes"
              ]
          },
          "setNamespaceIsolationBasic": "namespace-isolation-basic",
          "setNamespaceIsolationFull": "namespace-isolation-full"
      }

applications:
  - cilium
  - espejote

parameters:
  kapitan:
    dependencies:
      - type: https
        source: https://raw.githubusercontent.com/projectsyn/component-espejote/master/lib/espejote.libsonnet
        output_path: vendor/lib/espejote.libsonnet

  espejote:
    namespace: syn-espejote

  networkpolicy:
    ignoredNamespaces:
      - my-ignored-namespace
    networkPlugin: Cilium

    policies:
      syn-set-default-allow-intra-namespace:
        ~ingress:
          - from:
              - podSelector:
                  matchLabels:
                    io.cilium.k8s.policy.cluster: ${cluster:name}

    basePolicy:
      allowNamespaceLabels:
        test-group:
          - test.example.net/test-group: main
      cniPlugins:
        cilium:
          allowFromNodeLabels:
            syn.tools/cluster-id: ${cluster:name}
